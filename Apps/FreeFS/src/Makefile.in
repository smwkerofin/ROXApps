GTK_CONFIG = "@GTK_CONFIG@"
PKG_CONFIG = "@PKG_CONFIG@"
GTK_CFLAGS = @GTK_CFLAGS@
GTK_LIBS = @GTK_LIBS@
XML_CONFIG = @XML_CONFIG@
ROX_CLIB = "@ROX_RUN@" ROX-CLib
SHELL = @SHELL@
srcdir = @srcdir@
PLATFORM = @with_platform@
PLATFORM_DIR = ../${PLATFORM}
.SUFFIXES:
.SUFFIXES: .c .o

CC = @CC@
CFLAGS = @CFLAGS@ @LIBGTOP_INCS@ `${GTK_CFLAGS}` -I. `${ROX_CLIB} --cflags` `${XML_CONFIG} --cflags`
LIBS=@LIBGTOP_LIBS@ @LIBGTOP_EXTRA_LIBS@ `${GTK_LIBS}` `${ROX_CLIB} --libs` `${XML_CONFIG} --libs`
LDFLAGS = @LDFLAGS@ ${LIBS}
EXEC = ${PLATFORM_DIR}/${PROG}

############ Things to change for different programs

PROG = freefs

SRCS = freefs.c 

OBJECTS = freefs.o 

############ Things to keep the same

${EXEC}: ${PLATFORM_DIR} ${OBJECTS}
	${CC} -o ${EXEC} ${OBJECTS} ${LDFLAGS}

${PLATFORM_DIR}:
	mkdir ${PLATFORM_DIR}

clean:
	rm -f *.o Makefile.bak

depend:
	makedepend -- $(CFLAGS) -- $(SRCS)

Makefile: Makefile.in config.status
	./config.status

config.h: config.h.in
	./config.status

config.status: configure
	./configure --bindir=${PLATFORM_DIR}

configure: configure.in
	autoconf

FreeFS.po: $(SRCS)
	xgettext --keyword=_ --keyword=N_ --default-domain=FreeFS $(SRCS)
